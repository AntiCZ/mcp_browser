<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Early Errors</title>
    <script>
        // Generate errors immediately on page load
        console.error("ERROR 1: This error happens immediately on page load");

        // Reference error
        try {
            nonExistentVariable.doSomething();
        } catch(e) {
            console.error("ERROR 2: Caught error:", e.message);
        }

        // Uncaught error
        setTimeout(() => {
            throw new Error("ERROR 3: Uncaught error after 100ms");
        }, 100);

        // Type error
        setTimeout(() => {
            const obj = null;
            obj.property = "value"; // This will throw
        }, 200);

        // Network error (404)
        fetch('/non-existent-endpoint')
            .catch(err => console.error("ERROR 4: Network fetch failed:", err));

        // Syntax evaluation error
        setTimeout(() => {
            eval("this is not valid javascript {");
        }, 300);

        console.log("Page loaded with multiple errors");
    </script>
</head>
<body>
    <h1>Test Page for Early Errors</h1>
    <p>This page generates multiple errors on load, before debugger can be attached.</p>

    <div id="status">
        <h2>Error Generation Status:</h2>
        <ul>
            <li>✓ Console error on page load</li>
            <li>✓ Reference error (caught)</li>
            <li>✓ Uncaught error after 100ms</li>
            <li>✓ Type error after 200ms</li>
            <li>✓ Network fetch error</li>
            <li>✓ Eval syntax error after 300ms</li>
        </ul>
    </div>

    <button onclick="generateNewError()">Generate New Error</button>

    <script>
        function generateNewError() {
            const errorTime = new Date().toISOString();
            console.error(`ERROR: Manual error generated at ${errorTime}`);
            throw new Error(`Manual error at ${errorTime}`);
        }

        // Log after errors to show timing
        setTimeout(() => {
            console.log("All initial errors should have been generated by now");
        }, 500);
    </script>
</body>
</html>