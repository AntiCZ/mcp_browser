{
  "tool_hierarchy_hints": [
    {
      "pattern": "browser_execute_js.*\\.click\\(\\)",
      "severity": "high",
      "message": "STOP! You're using JavaScript to click. Use browser_find_element first to get a ref, then use browser_click with that ref.",
      "suggestion": "Replace JS click with: 1) browser_find_element to get ref, 2) browser_click with the ref",
      "example": "Instead of browser_execute_js({code: 'document.querySelector(\"button\").click()'}), use browser_find_element then browser_click"
    },
    {
      "pattern": "browser_execute_js.*\\.value\\s*=",
      "severity": "high", 
      "message": "STOP! You're using JavaScript to set values. Use browser_type instead.",
      "suggestion": "Use browser_type tool with proper ref",
      "example": "Instead of JS value assignment, use browser_type(ref='...', text='...')"
    },
    {
      "pattern": "browser_execute_js.*window\\.location",
      "severity": "medium",
      "message": "Consider using browser_navigate instead of JavaScript navigation",
      "suggestion": "Use browser_navigate(url='...') for navigation"
    }
  ],
  
  "verification_hints": [
    {
      "trigger": "add.*cart|buy|purchase|checkout",
      "action": "verify_product",
      "message": "VERIFY FIRST! Before adding to cart, use browser_verify_product to ensure this is the correct item type",
      "critical": true
    },
    {
      "trigger": "cheapest|lowest.*price|first.*result",
      "action": "verify_assumption",
      "message": "WARNING: Don't assume sort order matches intent. Verify the actual product matches what you're looking for.",
      "critical": true
    }
  ],
  
  "workflow_patterns": [
    {
      "name": "safe_interaction",
      "steps": [
        "If element not visible in snapshot, use browser_find_element",
        "Get the ref from browser_find_element",
        "Use high-level tool (browser_click, browser_type) with the ref",
        "Only use browser_execute_js for inspection/debugging"
      ]
    },
    {
      "name": "product_purchase",
      "steps": [
        "Search for product",
        "Sort/filter results",
        "For each candidate product:",
        "  - Use browser_verify_product to check it matches intent",
        "  - Only proceed if confidence > 70%",
        "Add verified product to cart",
        "Proceed to checkout"
      ]
    }
  ],
  
  "cognitive_reminders": [
    "TOOL HIERARCHY: snapshot → find_element → click/type (NOT execute_js for interactions)",
    "VERIFY ASSUMPTIONS: Search results may not match intent (batteries vs battery-powered devices)",
    "RETURN TO HIGH-LEVEL: After using JS for inspection, always return to proper browser tools",
    "CHECK TWICE: Product title AND category before adding to cart"
  ]
}